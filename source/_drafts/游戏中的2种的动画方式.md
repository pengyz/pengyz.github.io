---
title: 游戏中的2种的动画方式
date: 2016-06-08 17:06:12
tags: 
- cocos creator
categories: 
- 技术文档
- 游戏开发
---

游戏的中两种动画方式
===
游戏中一般存在两种动画方式：
* 序列帧动画
* 骨骼动画

关于这两种动画，下面有一张原理图：
![帧动画和骨骼动画原理](http://o8fsr2qhz.bkt.clouddn.com/images/anim%20type.png)


帧动画原理是把动画的每一帧保存在一个帧动画序列中，依次播放出来，形成动画，类似电影胶片的播放原理。

骨骼动画则是把每个部件用骨骼连接起来，骨骼中存储连接和位置等信息，在显示的时候通过cpu动态渲染生成每一帧的图像。

骨骼动画对比帧动画更节约空间，也方便开发者开发纸娃娃等的换装系统，这两种动画形式在cocos引擎中都提供支持。

sprite sheet
===
首先，这是一个在网页美工中应用较多的概念，把多张碎图拼成一张大图，我们叫做spritesheet，一次性加载入内存，然后通过某种方式依次截取大图中的某个部分作为小图来进行渲染和显示。这么做的主要原因是可以减少io次数和减小内存消耗。这个过程中我们用到的主要工具是texture packer。cocos creator支持直接导入texture apcker生成的plist文件作为精灵图集来使用。
下面就是我们做好的spritesheet，是我们的A少移动时的序列帧：
![sprite sheet](http://o8fsr2qhz.bkt.clouddn.com/images/alucard_move.png)

下面是对应生成的plist文件
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <dict>
        <key>frames</key>
        <dict>
            <key>alucard-move-clips_01.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{21,46}</string>
                <key>spriteSourceSize</key>
                <string>{21,46}</string>
                <key>textureRect</key>
                <string>{{401,75},{21,46}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_02.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{23,46}</string>
                <key>spriteSourceSize</key>
                <string>{23,46}</string>
                <key>textureRect</key>
                <string>{{376,75},{23,46}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_03.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{24,46}</string>
                <key>spriteSourceSize</key>
                <string>{24,46}</string>
                <key>textureRect</key>
                <string>{{318,75},{24,46}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_04.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{31,42}</string>
                <key>spriteSourceSize</key>
                <string>{31,42}</string>
                <key>textureRect</key>
                <string>{{377,42},{31,42}}</string>
                <key>textureRotated</key>
                <true/>
            </dict>
            <key>alucard-move-clips_05.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{41,43}</string>
                <key>spriteSourceSize</key>
                <string>{41,43}</string>
                <key>textureRect</key>
                <string>{{284,1},{41,43}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_06.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{43,45}</string>
                <key>spriteSourceSize</key>
                <string>{43,45}</string>
                <key>textureRect</key>
                <string>{{239,1},{43,45}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_07.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{38,43}</string>
                <key>spriteSourceSize</key>
                <string>{38,43}</string>
                <key>textureRect</key>
                <string>{{419,1},{38,43}}</string>
                <key>textureRotated</key>
                <true/>
            </dict>
            <key>alucard-move-clips_08.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{43,46}</string>
                <key>spriteSourceSize</key>
                <string>{43,46}</string>
                <key>textureRect</key>
                <string>{{194,1},{43,46}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_09.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{44,47}</string>
                <key>spriteSourceSize</key>
                <string>{44,47}</string>
                <key>textureRect</key>
                <string>{{148,1},{44,47}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_10.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{46,48}</string>
                <key>spriteSourceSize</key>
                <string>{46,48}</string>
                <key>textureRect</key>
                <string>{{100,1},{46,48}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_11.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{47,48}</string>
                <key>spriteSourceSize</key>
                <string>{47,48}</string>
                <key>textureRect</key>
                <string>{{51,1},{47,48}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_12.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{48,49}</string>
                <key>spriteSourceSize</key>
                <string>{48,49}</string>
                <key>textureRect</key>
                <string>{{1,54},{48,49}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_13.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{48,51}</string>
                <key>spriteSourceSize</key>
                <string>{48,51}</string>
                <key>textureRect</key>
                <string>{{1,1},{48,51}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_14.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{46,49}</string>
                <key>spriteSourceSize</key>
                <string>{46,49}</string>
                <key>textureRect</key>
                <string>{{51,51},{46,49}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_15.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{44,48}</string>
                <key>spriteSourceSize</key>
                <string>{44,48}</string>
                <key>textureRect</key>
                <string>{{99,51},{44,48}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_16.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{32,46}</string>
                <key>spriteSourceSize</key>
                <string>{32,46}</string>
                <key>textureRect</key>
                <string>{{284,75},{32,46}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_17.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{30,45}</string>
                <key>spriteSourceSize</key>
                <string>{30,45}</string>
                <key>textureRect</key>
                <string>{{344,73},{30,45}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_18.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{29,48}</string>
                <key>spriteSourceSize</key>
                <string>{29,48}</string>
                <key>textureRect</key>
                <string>{{327,42},{29,48}}</string>
                <key>textureRotated</key>
                <true/>
            </dict>
            <key>alucard-move-clips_19.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{29,44}</string>
                <key>spriteSourceSize</key>
                <string>{29,44}</string>
                <key>textureRect</key>
                <string>{{236,87},{29,44}}</string>
                <key>textureRotated</key>
                <true/>
            </dict>
            <key>alucard-move-clips_20.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{29,42}</string>
                <key>spriteSourceSize</key>
                <string>{29,42}</string>
                <key>textureRect</key>
                <string>{{194,49},{29,42}}</string>
                <key>textureRotated</key>
                <true/>
            </dict>
            <key>alucard-move-clips_21.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{28,41}</string>
                <key>spriteSourceSize</key>
                <string>{28,41}</string>
                <key>textureRect</key>
                <string>{{421,41},{28,41}}</string>
                <key>textureRotated</key>
                <true/>
            </dict>
            <key>alucard-move-clips_22.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{27,41}</string>
                <key>spriteSourceSize</key>
                <string>{27,41}</string>
                <key>textureRect</key>
                <string>{{284,46},{27,41}}</string>
                <key>textureRotated</key>
                <true/>
            </dict>
            <key>alucard-move-clips_23.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{26,44}</string>
                <key>spriteSourceSize</key>
                <string>{26,44}</string>
                <key>textureRect</key>
                <string>{{464,1},{26,44}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_24.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{27,45}</string>
                <key>spriteSourceSize</key>
                <string>{27,45}</string>
                <key>textureRect</key>
                <string>{{463,71},{27,45}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_25.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{34,45}</string>
                <key>spriteSourceSize</key>
                <string>{34,45}</string>
                <key>textureRect</key>
                <string>{{145,87},{34,45}}</string>
                <key>textureRotated</key>
                <true/>
            </dict>
            <key>alucard-move-clips_26.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{39,45}</string>
                <key>spriteSourceSize</key>
                <string>{39,45}</string>
                <key>textureRect</key>
                <string>{{327,1},{39,45}}</string>
                <key>textureRotated</key>
                <true/>
            </dict>
            <key>alucard-move-clips_27.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{37,44}</string>
                <key>spriteSourceSize</key>
                <string>{37,44}</string>
                <key>textureRect</key>
                <string>{{424,71},{37,44}}</string>
                <key>textureRotated</key>
                <false/>
            </dict>
            <key>alucard-move-clips_28.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{39,43}</string>
                <key>spriteSourceSize</key>
                <string>{39,43}</string>
                <key>textureRect</key>
                <string>{{374,1},{39,43}}</string>
                <key>textureRotated</key>
                <true/>
            </dict>
            <key>alucard-move-clips_29.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{37,43}</string>
                <key>spriteSourceSize</key>
                <string>{37,43}</string>
                <key>textureRect</key>
                <string>{{239,48},{37,43}}</string>
                <key>textureRotated</key>
                <true/>
            </dict>
            <key>alucard-move-clips_30.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{39,42}</string>
                <key>spriteSourceSize</key>
                <string>{39,42}</string>
                <key>textureRect</key>
                <string>{{192,80},{39,42}}</string>
                <key>textureRotated</key>
                <true/>
            </dict>
            <key>alucard-move-clips_31.png</key>
            <dict>
                <key>aliases</key>
                <array/>
                <key>spriteOffset</key>
                <string>{0,0}</string>
                <key>spriteSize</key>
                <string>{34,44}</string>
                <key>spriteSourceSize</key>
                <string>{34,44}</string>
                <key>textureRect</key>
                <string>{{145,51},{34,44}}</string>
                <key>textureRotated</key>
                <true/>
            </dict>
        </dict>
        <key>metadata</key>
        <dict>
            <key>format</key>
            <integer>3</integer>
            <key>pixelFormat</key>
            <string>RGBA8888</string>
            <key>premultiplyAlpha</key>
            <false/>
            <key>realTextureFileName</key>
            <string>alucard_move.png</string>
            <key>size</key>
            <string>{491,122}</string>
            <key>smartupdate</key>
            <string>$TexturePacker:SmartUpdate:44c97850523cf4e925eddc4aa48f3796:f229c12c40c8a19d8e29b463d885558c:f2b9ae9e2061ecf8813e85c30ef61766$</string>
            <key>textureFileName</key>
            <string>alucard_move.png</string>
        </dict>
    </dict>
</plist>

```
这样就可以大致知道texture packer的工作原理：

把小图合成为大图，然后用一个xml记录每个小图的原始文件名和图像在大图中的位置。

未完待续